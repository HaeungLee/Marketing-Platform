<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ì´ë¯¸ì§€ ìƒì„± ë° í¸ì§‘ ë°ëª¨</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/6.6.0/fabric.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .section-title {
            color: #2d3748;
            border-bottom: 2px solid #4299e1;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .input-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #2d3748;
        }
        input, textarea, select, button {
            padding: 8px 12px;
            border: 1px solid #cbd5e0;
            border-radius: 4px;
            font-size: 14px;
        }
        input[type="text"], textarea {
            width: 100%;
            box-sizing: border-box;
        }
        button {
            background-color: #4299e1;
            color: white;
            border: none;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        button:hover {
            background-color: #3182ce;
        }
        button:disabled {
            background-color: #a0aec0;
            cursor: not-allowed;
        }
        .tool-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }
        .canvas-container {
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            background-color: #f8f9fa;
            display: flex;
            justify-content: center;
        }
        canvas {
            border: 1px solid #cbd5e0;
            background-color: white;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        .status.success {
            background-color: #c6f6d5;
            color: #22543d;
        }
        .status.error {
            background-color: #fed7d7;
            color: #742a2a;
        }
        .status.loading {
            background-color: #bee3f8;
            color: #2a4365;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <h1>ğŸ¨ AI ì´ë¯¸ì§€ ìƒì„± ë° í¸ì§‘ ë°ëª¨</h1>
    
    <!-- ì´ë¯¸ì§€ ìƒì„± ì„¹ì…˜ -->
    <div class="container">
        <h2 class="section-title">1. AI ì´ë¯¸ì§€ ìƒì„±</h2>
        <div class="input-group">
            <label for="promptInput">í”„ë¡¬í”„íŠ¸ ì…ë ¥:</label>
            <textarea id="promptInput" placeholder="ì˜ˆ: ëª¨ë˜í•œ ì¹´í˜ ì „ë‹¨ì§€, íŒŒë€ìƒ‰ ë°°ê²½, ë¯¸ë‹ˆë©€ ë””ìì¸" rows="2"></textarea>
        </div>
        <button id="generateBtn" onclick="generateImage()">ğŸ¤– AI ì´ë¯¸ì§€ ìƒì„±</button>
        <div id="status" class="status hidden"></div>
    </div>

    <!-- í¸ì§‘ ë„êµ¬ ì„¹ì…˜ -->
    <div class="container">
        <h2 class="section-title">2. í¸ì§‘ ë„êµ¬</h2>
        
        <!-- í…ìŠ¤íŠ¸ ì¶”ê°€ -->
        <div class="input-group">
            <label>í…ìŠ¤íŠ¸ ì¶”ê°€:</label>
            <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                <input type="text" id="textInput" placeholder="ì¶”ê°€í•  í…ìŠ¤íŠ¸" style="flex: 1; min-width: 200px;">
                <input type="number" id="fontSize" value="24" min="8" max="72" style="width: 60px;" title="ê¸€ì í¬ê¸°">
                <input type="color" id="textColor" value="#000000" title="ê¸€ì ìƒ‰ìƒ">
                <button onclick="addText()">í…ìŠ¤íŠ¸ ì¶”ê°€</button>
            </div>
        </div>

        <!-- ë„í˜• ì¶”ê°€ -->
        <div class="input-group">
            <label>ë„í˜• ì¶”ê°€:</label>
            <div class="tool-group">
                <button onclick="addShape('rectangle')">ğŸ“ ì‚¬ê°í˜•</button>
                <button onclick="addShape('circle')">â­• ì›í˜•</button>
                <button onclick="addShape('triangle')">ğŸ”º ì‚¼ê°í˜•</button>
            </div>
        </div>

        <!-- í¸ì§‘ ì•¡ì…˜ -->
        <div class="input-group">
            <label>í¸ì§‘ ì•¡ì…˜:</label>
            <div class="tool-group">
                <button onclick="deleteSelected()">ğŸ—‘ï¸ ì„ íƒ ì‚­ì œ</button>
                <button onclick="clearCanvas()">ğŸ§¹ ì „ì²´ ì§€ìš°ê¸°</button>
                <button onclick="downloadImage()">ğŸ’¾ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ</button>
            </div>
        </div>
    </div>

    <!-- ìº”ë²„ìŠ¤ ì„¹ì…˜ -->
    <div class="container">
        <h2 class="section-title">3. í¸ì§‘ ìº”ë²„ìŠ¤</h2>
        <div class="canvas-container">
            <canvas id="fabricCanvas" width="800" height="600"></canvas>
        </div>
    </div>

    <script>
        let canvas;
        
        // Fabric.js ìº”ë²„ìŠ¤ ì´ˆê¸°í™”
        function initCanvas() {
            canvas = new fabric.Canvas('fabricCanvas', {
                backgroundColor: 'white'
            });
            
            // í‚¤ë³´ë“œ ì´ë²¤íŠ¸ ì¶”ê°€
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Delete' && canvas.getActiveObject()) {
                    deleteSelected();
                }
            });
        }

        // AI ì´ë¯¸ì§€ ìƒì„± (ì‹¤ì œë¡œëŠ” í”Œë ˆì´ìŠ¤í™€ë”)
        async function generateImage() {
            const prompt = document.getElementById('promptInput').value;
            const generateBtn = document.getElementById('generateBtn');
            const status = document.getElementById('status');
            
            if (!prompt.trim()) {
                showStatus('í”„ë¡¬í”„íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
                return;
            }

            generateBtn.disabled = true;
            generateBtn.textContent = 'ğŸ”„ ì´ë¯¸ì§€ ìƒì„± ì¤‘...';
            showStatus('AI ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'loading');

            try {
                // ì‹¤ì œ API í˜¸ì¶œ ëŒ€ì‹  í”Œë ˆì´ìŠ¤í™€ë” ì´ë¯¸ì§€ ìƒì„±
                await new Promise(resolve => setTimeout(resolve, 2000)); // 2ì´ˆ ëŒ€ê¸°
                
                // í”Œë ˆì´ìŠ¤í™€ë” ì´ë¯¸ì§€ ìƒì„±
                const placeholderUrl = createPlaceholderImage(prompt);
                
                // ìº”ë²„ìŠ¤ì— ì´ë¯¸ì§€ ì¶”ê°€
                fabric.Image.fromURL(placeholderUrl, function(img) {
                    canvas.clear();
                    
                    // ì´ë¯¸ì§€ í¬ê¸° ì¡°ì •
                    const scale = Math.min(
                        canvas.width / img.width,
                        canvas.height / img.height
                    ) * 0.8;
                    
                    img.scale(scale);
                    img.center();
                    canvas.add(img);
                    canvas.renderAll();
                    
                    showStatus('âœ… ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                });
                
            } catch (error) {
                showStatus('âŒ ì´ë¯¸ì§€ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
                console.error(error);
            } finally {
                generateBtn.disabled = false;
                generateBtn.textContent = 'ğŸ¤– AI ì´ë¯¸ì§€ ìƒì„±';
            }
        }

        // í”Œë ˆì´ìŠ¤í™€ë” ì´ë¯¸ì§€ ìƒì„±
        function createPlaceholderImage(prompt) {
            const canvas = document.createElement('canvas');
            canvas.width = 512;
            canvas.height = 512;
            const ctx = canvas.getContext('2d');
            
            // ë°°ê²½ ê·¸ë¼ë””ì–¸íŠ¸
            const gradient = ctx.createLinearGradient(0, 0, 512, 512);
            gradient.addColorStop(0, '#667eea');
            gradient.addColorStop(1, '#764ba2');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 512, 512);
            
            // í…ìŠ¤íŠ¸ ì¶”ê°€
            ctx.fillStyle = 'white';
            ctx.font = 'bold 24px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('AI Generated Image', 256, 200);
            
            ctx.font = '16px Arial';
            const lines = wrapText(ctx, prompt, 400);
            lines.forEach((line, index) => {
                ctx.fillText(line, 256, 250 + (index * 25));
            });
            
            ctx.font = '14px Arial';
            ctx.fillText('Image generation in progress...', 256, 350);
            
            // ì¥ì‹ ìš”ì†Œ
            ctx.strokeStyle = 'rgba(255,255,255,0.3)';
            ctx.lineWidth = 2;
            ctx.strokeRect(50, 50, 412, 412);
            
            return canvas.toDataURL();
        }

        // í…ìŠ¤íŠ¸ ì¤„ë°”ê¿ˆ í—¬í¼
        function wrapText(ctx, text, maxWidth) {
            const words = text.split(' ');
            const lines = [];
            let line = '';
            
            for (let word of words) {
                const testLine = line + word + ' ';
                const metrics = ctx.measureText(testLine);
                
                if (metrics.width > maxWidth && line !== '') {
                    lines.push(line.trim());
                    line = word + ' ';
                } else {
                    line = testLine;
                }
            }
            lines.push(line.trim());
            return lines.slice(0, 3); // ìµœëŒ€ 3ì¤„
        }

        // í…ìŠ¤íŠ¸ ì¶”ê°€
        function addText() {
            const textInput = document.getElementById('textInput');
            const fontSize = document.getElementById('fontSize').value;
            const textColor = document.getElementById('textColor').value;
            
            if (!textInput.value.trim()) {
                showStatus('í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
                return;
            }

            const text = new fabric.Text(textInput.value, {
                left: 100,
                top: 100,
                fontSize: parseInt(fontSize),
                fill: textColor,
                fontFamily: 'Arial'
            });

            canvas.add(text);
            canvas.setActiveObject(text);
            canvas.renderAll();
            
            textInput.value = '';
            showStatus('í…ìŠ¤íŠ¸ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        }

        // ë„í˜• ì¶”ê°€
        function addShape(shapeType) {
            let shape;
            const commonProps = {
                left: 150,
                top: 150,
                fill: 'rgba(66, 153, 225, 0.5)',
                stroke: '#4299e1',
                strokeWidth: 2
            };

            switch (shapeType) {
                case 'rectangle':
                    shape = new fabric.Rect({
                        ...commonProps,
                        width: 100,
                        height: 80
                    });
                    break;
                case 'circle':
                    shape = new fabric.Circle({
                        ...commonProps,
                        radius: 50
                    });
                    break;
                case 'triangle':
                    shape = new fabric.Triangle({
                        ...commonProps,
                        width: 100,
                        height: 100
                    });
                    break;
            }

            if (shape) {
                canvas.add(shape);
                canvas.setActiveObject(shape);
                canvas.renderAll();
                showStatus(`${shapeType} ë„í˜•ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
            }
        }

        // ì„ íƒëœ ê°ì²´ ì‚­ì œ
        function deleteSelected() {
            const activeObjects = canvas.getActiveObjects();
            if (activeObjects.length) {
                canvas.remove(...activeObjects);
                canvas.discardActiveObject();
                canvas.renderAll();
                showStatus('ì„ íƒëœ ê°ì²´ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            } else {
                showStatus('ì‚­ì œí•  ê°ì²´ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.', 'error');
            }
        }

        // ìº”ë²„ìŠ¤ ì§€ìš°ê¸°
        function clearCanvas() {
            canvas.clear();
            canvas.backgroundColor = 'white';
            canvas.renderAll();
            showStatus('ìº”ë²„ìŠ¤ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        }

        // ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
        function downloadImage() {
            const dataURL = canvas.toDataURL({
                format: 'png',
                quality: 1
            });
            
            const link = document.createElement('a');
            link.download = 'ai-flyer.png';
            link.href = dataURL;
            link.click();
            
            showStatus('ì´ë¯¸ì§€ê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        }

        // ìƒíƒœ ë©”ì‹œì§€ í‘œì‹œ
        function showStatus(message, type) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = `status ${type}`;
            status.classList.remove('hidden');
            
            if (type === 'success' || type === 'error') {
                setTimeout(() => {
                    status.classList.add('hidden');
                }, 3000);
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.addEventListener('load', initCanvas);
    </script>
</body>
</html>
