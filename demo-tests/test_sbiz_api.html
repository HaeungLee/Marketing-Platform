<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì†Œìƒê³µì¸ ë°ì´í„° ë¶„ì„ ë°ëª¨</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .api-section {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 8px;
            font-weight: 500;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        .result-box {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 16px;
            margin-top: 12px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
        }
        .chart-container {
            position: relative;
            height: 400px;
            margin: 20px 0;
        }
        .loading {
            text-align: center;
            color: #666;
            font-style: italic;
        }
        .error {
            color: #dc3545;
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 4px;
            padding: 12px;
            margin: 8px 0;
        }
        .success {
            color: #155724;
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 4px;
            padding: 12px;
            margin: 8px 0;
        }
        .insight-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-radius: 12px;
            padding: 20px;
            margin: 16px 0;
        }
        .insight-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 8px;
        }
        .insight-desc {
            font-size: 14px;
            opacity: 0.9;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin: 20px 0;
        }
        .stat-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 16px;
            text-align: center;
        }
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }
        .stat-label {
            font-size: 12px;
            color: #666;
            margin-top: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸª ì†Œìƒê³µì¸ ë°ì´í„° ë¶„ì„ í”Œë«í¼ ë°ëª¨</h1>
        <p>ì†Œìƒê³µì¸ì‹œì¥ì§„í¥ê³µë‹¨ APIë¥¼ í™œìš©í•œ ì‹¤ì‹œê°„ ìƒê¶Œ ë¶„ì„ ë° ì¸ì‚¬ì´íŠ¸ ì œê³µ</p>
    </div>

    <div class="container">
        <h2>ğŸ“Š API ë°ì´í„° ìˆ˜ì§‘ ë° ë¶„ì„</h2>
        
        <div class="api-section">
            <h3>ğŸ”¥ í•«í”Œë ˆì´ìŠ¤ ë¶„ì„</h3>
            <p>ì¸ê¸° ìƒê¶Œ ì •ë³´ë¥¼ ë¶„ì„í•˜ì—¬ íŠ¸ë Œë“œë¥¼ íŒŒì•…í•©ë‹ˆë‹¤.</p>
            <button class="btn" onclick="fetchHotPlaceData()">í•«í”Œë ˆì´ìŠ¤ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°</button>
            <div id="hotplace-result" class="result-box" style="display:none;"></div>
        </div>

        <div class="api-section">
            <h3>ğŸ—ºï¸ ìƒê¶Œì§€ë„ ë¶„ì„</h3>
            <p>ì°½ì—… ê³µê³µ ë°ì´í„°ë¥¼ í™œìš©í•œ ìƒê¶Œ ë¶„ì„ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
            <button class="btn" onclick="fetchCommercialAreaData()">ìƒê¶Œì§€ë„ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°</button>
            <div id="commercial-result" class="result-box" style="display:none;"></div>
        </div>

        <div class="api-section">
            <h3>ğŸ“ˆ ë§¤ì¶œì¶”ì´ ë¶„ì„</h3>
            <p>ì—…ì¢…ë³„ ë§¤ì¶œ ë³€í™” ì¶”ì´ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤.</p>
            <button class="btn" onclick="fetchSalesData()">ë§¤ì¶œì¶”ì´ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°</button>
            <div id="sales-result" class="result-box" style="display:none;"></div>
        </div>

        <div class="api-section">
            <h3>ğŸ” ê°„ë‹¨ë¶„ì„</h3>
            <p>ìƒê¶Œì— ëŒ€í•œ ì¢…í•©ì ì¸ ê°„ë‹¨ ë¶„ì„ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
            <button class="btn" onclick="fetchSimpleAnalysis()">ê°„ë‹¨ë¶„ì„ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°</button>
            <div id="simple-result" class="result-box" style="display:none;"></div>
        </div>
    </div>

    <div class="container">
        <h2>ğŸ“ˆ ë°ì´í„° ì‹œê°í™”</h2>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="total-businesses">-</div>
                <div class="stat-label">ì´ ì‚¬ì—…ì²´ ìˆ˜</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="avg-sales">-</div>
                <div class="stat-label">í‰ê·  ë§¤ì¶œì•¡</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="growth-rate">-</div>
                <div class="stat-label">ì„±ì¥ë¥ </div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="hot-areas">-</div>
                <div class="stat-label">í•«í”Œë ˆì´ìŠ¤ ìˆ˜</div>
            </div>
        </div>

        <div class="chart-container">
            <canvas id="salesChart"></canvas>
        </div>

        <div class="chart-container">
            <canvas id="areaChart"></canvas>
        </div>
    </div>

    <div class="container">
        <h2>ğŸ’¡ AI ì¸ì‚¬ì´íŠ¸</h2>
        <div id="insights-container">
            <div class="insight-card">
                <div class="insight-title">ë°ì´í„° ìˆ˜ì§‘ ì¤€ë¹„ ì™„ë£Œ</div>
                <div class="insight-desc">ìœ„ì˜ ë²„íŠ¼ë“¤ì„ í´ë¦­í•˜ì—¬ ì‹¤ì œ ì†Œìƒê³µì¸ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³  ë¶„ì„ì„ ì‹œì‘í•˜ì„¸ìš”.</div>
            </div>
        </div>
    </div>

    <div class="container">
        <h2>ğŸ“Š ë°ì´í„° ì‹œê°í™” (Iframe)</h2>
        <iframe src="https://bigdata.sbiz.or.kr/#/openApi/hpReport?certKey=7794d741d33deb6e8f76ac8332aaa3728f4e5f7979622ca2440410786e939415" 
                width="100%" height="600" style="border: none;"></iframe>
    </div>

    <script>
        // API í‚¤ ì •ë³´
        const API_KEYS = {
            hotplace: '7794d741d33deb6e8f76ac8332aaa3728f4e5f7979622ca2440410786e939415',
            commercial: '2d2f5787eefef5f04b9420f1de7065800c5e7e0f5c3bb8716dc15905d93dfe12',
            sales: '83c9619da7b8a762caee43281fc625ff9cb4da6f4902b00f2c46fbf8f51df606',
            simple: '2ef6b4121693d2cf8f157ea952b2d2451bc30d606988fb13ad82e53b892b36d8'
        };

        // ì°¨íŠ¸ ê°ì²´ë“¤
        let salesChart = null;
        let areaChart = null;

        // ì „ì—­ ë°ì´í„° ì €ì¥ì†Œ
        let globalData = {
            hotplace: null,
            commercial: null,
            sales: null,
            simple: null
        };

        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        function showLoading(containerId) {
            document.getElementById(containerId).style.display = 'block';
            document.getElementById(containerId).innerHTML = '<div class="loading">ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘...</div>';
        }

        function showError(containerId, message) {
            document.getElementById(containerId).innerHTML = `<div class="error">âŒ ì˜¤ë¥˜: ${message}</div>`;
        }

        function showSuccess(containerId, data) {
            document.getElementById(containerId).innerHTML = `
                <div class="success">âœ… ë°ì´í„° ìˆ˜ì§‘ ì„±ê³µ!</div>
                <pre>${JSON.stringify(data, null, 2)}</pre>
            `;
        }

        // í•«í”Œë ˆì´ìŠ¤ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        async function fetchHotPlaceData() {
            showLoading('hotplace-result');
            
            try {
                // ì‹¤ì œ API í˜¸ì¶œ (CORS ë¬¸ì œë¡œ ì¸í•´ í”„ë¡ì‹œ ì„œë²„ í•„ìš”)
                // ì„ì‹œë¡œ ëª©ì—… ë°ì´í„° ì‚¬ìš©
                const mockData = {
                    resultCode: "200",
                    resultMsg: "SUCCESS",
                    data: [
                        {
                            areaName: "ê°•ë‚¨êµ¬ ì—­ì‚¼ë™",
                            hotScore: 85.5,
                            businessCount: 1250,
                            avgSales: 2500000,
                            growthRate: 12.3,
                            mainCategory: "ìŒì‹ì ì—…",
                            trend: "ìƒìŠ¹"
                        },
                        {
                            areaName: "ë§ˆí¬êµ¬ í™ëŒ€ì…êµ¬",
                            hotScore: 78.2,
                            businessCount: 980,
                            avgSales: 1800000,
                            growthRate: 8.7,
                            mainCategory: "ì£¼ì ì—…",
                            trend: "ìƒìŠ¹"
                        },
                        {
                            areaName: "ì¢…ë¡œêµ¬ ëª…ë™",
                            hotScore: 72.1,
                            businessCount: 650,
                            avgSales: 3200000,
                            growthRate: -2.1,
                            mainCategory: "ì†Œë§¤ì—…",
                            trend: "í•˜ë½"
                        }
                    ]
                };

                globalData.hotplace = mockData;
                showSuccess('hotplace-result', mockData);
                updateStats();
                updateInsights();
                drawCharts();
                
            } catch (error) {
                showError('hotplace-result', error.message);
            }
        }

        // ìƒê¶Œì§€ë„ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        async function fetchCommercialAreaData() {
            showLoading('commercial-result');
            
            try {
                const mockData = {
                    resultCode: "200",
                    resultMsg: "SUCCESS",
                    data: {
                        totalAreas: 45,
                        categories: [
                            { name: "ìŒì‹ì ", count: 15, percentage: 33.3 },
                            { name: "ì¹´í˜", count: 12, percentage: 26.7 },
                            { name: "ì†Œë§¤ì—…", count: 8, percentage: 17.8 },
                            { name: "ì„œë¹„ìŠ¤ì—…", count: 6, percentage: 13.3 },
                            { name: "ê¸°íƒ€", count: 4, percentage: 8.9 }
                        ],
                        averageRent: 85000,
                        footTraffic: 12500,
                        competitionLevel: "ë³´í†µ"
                    }
                };

                globalData.commercial = mockData;
                showSuccess('commercial-result', mockData);
                updateStats();
                updateInsights();
                drawCharts();
                
            } catch (error) {
                showError('commercial-result', error.message);
            }
        }

        // ë§¤ì¶œì¶”ì´ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        async function fetchSalesData() {
            showLoading('sales-result');
            
            try {
                const mockData = {
                    resultCode: "200",
                    resultMsg: "SUCCESS",
                    data: {
                        period: "2024ë…„ 1ì›”-12ì›”",
                        monthlySales: [
                            { month: "1ì›”", sales: 180000000 },
                            { month: "2ì›”", sales: 165000000 },
                            { month: "3ì›”", sales: 195000000 },
                            { month: "4ì›”", sales: 210000000 },
                            { month: "5ì›”", sales: 225000000 },
                            { month: "6ì›”", sales: 240000000 },
                            { month: "7ì›”", sales: 235000000 },
                            { month: "8ì›”", sales: 255000000 },
                            { month: "9ì›”", sales: 245000000 },
                            { month: "10ì›”", sales: 220000000 },
                            { month: "11ì›”", sales: 205000000 },
                            { month: "12ì›”", sales: 280000000 }
                        ],
                        totalSales: 2655000000,
                        averageMonthlySales: 221250000,
                        peakMonth: "12ì›”",
                        lowestMonth: "2ì›”"
                    }
                };

                globalData.sales = mockData;
                showSuccess('sales-result', mockData);
                updateStats();
                updateInsights();
                drawCharts();
                
            } catch (error) {
                showError('sales-result', error.message);
            }
        }

        // ê°„ë‹¨ë¶„ì„ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        async function fetchSimpleAnalysis() {
            showLoading('simple-result');
            
            try {
                const mockData = {
                    resultCode: "200",
                    resultMsg: "SUCCESS",
                    data: {
                        overallScore: 76.5,
                        recommendation: "ì°½ì—… ì¶”ì²œ",
                        riskLevel: "ë³´í†µ",
                        marketSize: "ì¤‘ê°„",
                        competitionLevel: "ë†’ìŒ",
                        successProbability: 68.2,
                        keyFactors: [
                            "ë†’ì€ ìœ ë™ì¸êµ¬",
                            "ë‹¤ì–‘í•œ ì—°ë ¹ì¸µ",
                            "ëŒ€ì¤‘êµí†µ ì ‘ê·¼ì„± ìš°ìˆ˜",
                            "ê²½ìŸì—…ì²´ ë°€ì§‘"
                        ],
                        suggestions: [
                            "ì°¨ë³„í™”ëœ ë©”ë‰´ ê°œë°œ í•„ìš”",
                            "ë””ì§€í„¸ ë§ˆì¼€íŒ… ê°•í™”",
                            "ê³ ê° ì„œë¹„ìŠ¤ í’ˆì§ˆ í–¥ìƒ"
                        ]
                    }
                };

                globalData.simple = mockData;
                showSuccess('simple-result', mockData);
                updateStats();
                updateInsights();
                drawCharts();
                
            } catch (error) {
                showError('simple-result', error.message);
            }
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            if (globalData.hotplace) {
                const totalBusinesses = globalData.hotplace.data.reduce((sum, item) => sum + item.businessCount, 0);
                document.getElementById('total-businesses').textContent = totalBusinesses.toLocaleString();
                
                const avgSales = globalData.hotplace.data.reduce((sum, item) => sum + item.avgSales, 0) / globalData.hotplace.data.length;
                document.getElementById('avg-sales').textContent = (avgSales / 10000).toFixed(0) + 'ë§Œì›';
                
                const avgGrowth = globalData.hotplace.data.reduce((sum, item) => sum + item.growthRate, 0) / globalData.hotplace.data.length;
                document.getElementById('growth-rate').textContent = avgGrowth.toFixed(1) + '%';
                
                document.getElementById('hot-areas').textContent = globalData.hotplace.data.length;
            }
        }

        // ì¸ì‚¬ì´íŠ¸ ì—…ë°ì´íŠ¸
        function updateInsights() {
            const container = document.getElementById('insights-container');
            let insights = [];

            if (globalData.hotplace) {
                const topArea = globalData.hotplace.data.reduce((prev, current) => 
                    (prev.hotScore > current.hotScore) ? prev : current
                );
                insights.push({
                    title: `ğŸ† ìµœê³  í•«í”Œë ˆì´ìŠ¤: ${topArea.areaName}`,
                    desc: `í•«ìŠ¤ì½”ì–´ ${topArea.hotScore}ì ìœ¼ë¡œ ê°€ì¥ ë†’ì€ ì¸ê¸°ë¥¼ ë³´ì´ê³  ìˆìŠµë‹ˆë‹¤. ${topArea.mainCategory} ì—…ì¢…ì´ ì£¼ë¥¼ ì´ë£¨ë©°, ì„±ì¥ë¥  ${topArea.growthRate}%ë¥¼ ê¸°ë¡í–ˆìŠµë‹ˆë‹¤.`
                });
            }

            if (globalData.sales) {
                const peakSales = Math.max(...globalData.sales.data.monthlySales.map(m => m.sales));
                const peakMonth = globalData.sales.data.monthlySales.find(m => m.sales === peakSales);
                insights.push({
                    title: `ğŸ“Š ë§¤ì¶œ í”¼í¬: ${peakMonth.month}`,
                    desc: `${peakMonth.month}ì— ${(peakSales / 100000000).toFixed(1)}ì–µì›ìœ¼ë¡œ ìµœê³  ë§¤ì¶œì„ ê¸°ë¡í–ˆìŠµë‹ˆë‹¤. ì—°ë§ ì‹œì¦Œ íš¨ê³¼ê°€ ëšœë ·í•˜ê²Œ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤.`
                });
            }

            if (globalData.simple) {
                const score = globalData.simple.data.overallScore;
                insights.push({
                    title: `ğŸ¯ ì¢…í•© í‰ê°€: ${score}ì `,
                    desc: `${globalData.simple.data.recommendation} ë“±ê¸‰ìœ¼ë¡œ ì„±ê³µ í™•ë¥  ${globalData.simple.data.successProbability}%ì…ë‹ˆë‹¤. ${globalData.simple.data.keyFactors.join(', ')} ë“±ì˜ ì¥ì ì´ ìˆìŠµë‹ˆë‹¤.`
                });
            }

            if (insights.length > 0) {
                container.innerHTML = insights.map(insight => `
                    <div class="insight-card">
                        <div class="insight-title">${insight.title}</div>
                        <div class="insight-desc">${insight.desc}</div>
                    </div>
                `).join('');
            }
        }

        // ì°¨íŠ¸ ê·¸ë¦¬ê¸°
        function drawCharts() {
            // ë§¤ì¶œì¶”ì´ ì°¨íŠ¸
            if (globalData.sales && !salesChart) {
                const ctx = document.getElementById('salesChart').getContext('2d');
                salesChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: globalData.sales.data.monthlySales.map(m => m.month),
                        datasets: [{
                            label: 'ì›”ë³„ ë§¤ì¶œì•¡ (ì–µì›)',
                            data: globalData.sales.data.monthlySales.map(m => m.sales / 100000000),
                            borderColor: 'rgba(102, 126, 234, 1)',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: '2024ë…„ ì›”ë³„ ë§¤ì¶œ ì¶”ì´'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'ë§¤ì¶œì•¡ (ì–µì›)'
                                }
                            }
                        }
                    }
                });
            }

            // ìƒê¶Œ ë¶„í¬ ì°¨íŠ¸
            if (globalData.commercial && !areaChart) {
                const ctx = document.getElementById('areaChart').getContext('2d');
                areaChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: globalData.commercial.data.categories.map(c => c.name),
                        datasets: [{
                            data: globalData.commercial.data.categories.map(c => c.count),
                            backgroundColor: [
                                'rgba(255, 99, 132, 0.8)',
                                'rgba(54, 162, 235, 0.8)',
                                'rgba(255, 205, 86, 0.8)',
                                'rgba(75, 192, 192, 0.8)',
                                'rgba(153, 102, 255, 0.8)'
                            ],
                            borderColor: [
                                'rgba(255, 99, 132, 1)',
                                'rgba(54, 162, 235, 1)',
                                'rgba(255, 205, 86, 1)',
                                'rgba(75, 192, 192, 1)',
                                'rgba(153, 102, 255, 1)'
                            ],
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'ì—…ì¢…ë³„ ìƒê¶Œ ë¶„í¬'
                            },
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ì†Œìƒê³µì¸ ë°ì´í„° ë¶„ì„ í”Œë«í¼ ì´ˆê¸°í™” ì™„ë£Œ');
        });
    </script>
</body>
</html>
